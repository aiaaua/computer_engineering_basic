# Pipeline and CPU

## Pipeline Branch Prediction

명령어 파이프라인이 정상적인 동작에서 벗어나게 되는 요인은 다음과 같다.

1. 자원 충돌(Resource Conflict): 두 세그먼트가 동시에 메모리를 접근하려고 함
2. 데이터 의존성(Data Dependency):  충돌은 어떤 명령어가 이전 명령어의 결과에 의존하여 수행되는데, 그 값이 아직 준비되지 않은 경우에 발생
3. 분기 곤란(branch difficulty): 분기 명령어같이 PC의 값을 변경시키려는 명령어엥 의해 발생



### Data Dependency

데이터나 주소의 충돌은 명령어 파이프라인의 성능을 저하시키는 요인으로

데이터 의존성은 아직 준비되지 않은 데이터를 기다리는 경우이며,

주소 의존성은 마이크로 연산시 레지스터 간접모드를 사용하는 명령어가 이전 명령어가 주소값을 메모리로부터 로드하는 명령어라면 피연산자를 fetch하지 못하고 기다리게 되는 경우임

데이터 의존성의 해결방법은 다음과 같다.

1. 하드웨어 인터락(Hardware Interlock)

   어떤 명령어의 피연산자가 파이프라인에서 앞서간 명령어의 목적지와 일치하는지를 검사하는 회로

   이런 상황이 감지되면 피연산자가 준비되지 않은 명령어는 충분한 클럭 사이클을 두어 충돌을 피함

2. 오퍼랜드 포워딩(Operand Forwarding)

   충돌을 감지하는 경우 특별한 통로를 통해 직접 파이프라인 세그먼트에 전달하는 경우