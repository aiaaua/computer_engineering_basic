# System Call and API

시스템 프로그래밍의 기반 요소는 다음과 같다.

- System Call(=C언어 함수)
- C 라이브러리
- C 컴파일러



## System Call

운영체제 리소스나 서비스 요청을 위해 사용자 영역에서 커널 영역으로 들어가는 함수

주요 시스템콜로는 read(), write(), open() 등이 있음

리눅스/유닉스는 C언어로 만들어져있으므로 시스템콜도 C언어로 구현되어있음

```c
mov eax, 1
mov evx, 0
int 0x80
```

> eax 레지스터에 시스템콜 번호를 넣고
>
> ebx 레지스터에 시스템콜에 해당하는 인자값을 넣고
>
> 소프트웨어 인터럽트명령을 호출하면서(int, instruction code) 0x80값을 넘겨줌
>
> - CPU는 사용자 모드를 커널 모드로 바꿔줌
> - IDT에서 0x80에 해당하는 주소를 찾아서 실행
> - system_call()함수에서 eax로부터 시스템콜 번호를 찾아 해당 번호에 맞는 시스템콜 함수로 이동
> - 해당 시스템콜 함수 실행 후 다시 커널모드에서 상ㅇ자모드로 변경하고 다시 프로세스의 다음 코드 진행



## C 라이브러리

- 유닉스 C 라이브러리: libc
- 리눅스 C 라이브러리: GNU libc, glibc(시스템콜, 시스템콜 래퍼, 기본 응용프로그램 기능 포함)



## C 컴파일러

- 유닉스 C 컴파일러: cc
- 리눅스 C 컴파일러: GNU cc, gcc



## API

응용프로그램과 분리된 하위 호환 인터페이스

사용자가 사용하기 쉽게 인터페이스 제공

동적 라이브러리와 정적 라이브러리가 있음

