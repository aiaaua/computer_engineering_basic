# Shell Script

쉘 스크립트는 쉘 명령어를 기본으로 하되 몇 가지 문법을 추가하여 프로그래밍할 수 있도록 한 것

서버 작업 자동화 및 운영(DevOps)에 사용됨

쉘 스크립트는 파일로 작성 후 파일을 실행함

파일의 가장 위 첫 라인은 `#!/bin/bash`로 시작

쉘 스크립트 파일은 실행 권한을 가지고 있어야 함

일반적으로 `파일이름.sh` 와 같은 형태로 파일 이름을 작성함



## Example

**출력**

```shell
#!/bin/bash

echo "Hello Bash!"
```

> echo는 화면에 출력해주는 쉘 명령어임



**변수선언**

```shell
#!/bin/bash

mysql_id='root'
mysql_directory='/etc/mysql'

echo $mysql_id
echo $mysql_directory
```

> 변수선언은 `변수명=데이터` 로 선언할 수 있으며 띄어쓰기는 허용되지 않음
>
> `$변수명` 으로 사용됨



**리스트 변수**

```shell
#!/bin/bash

daemons=("httpd" "mysqld" "vsftpd")
echo ${daemons[1]}                  # $deamons 배열의 두 번째 인덱스에 해당하는 mysqld 출력
echo ${daemons[@]}                  # $deamons 배열의 모든 데이터 출력
echo ${daemons[*]}                  # $deamons 배열의 모든 데이터 출력
echo ${#daemons[@]}                 # $deamons 배열 크기 출력

filelist=( $(ls) )                  # 쉘 스크립트 실행 디렉토리의 파일 리스트를 배열로 $filelist 변수에 담음
echo ${filelist[*]}                 # $filelist 모든 데이터 출력
```



**지역 변수**

```
$$ : 쉘의 프로세스 번호
$0 : 쉘스크립트 이름
$1 ~ $9 : 명령줄 인수
$* : 모든 명령줄 인수리스트
$# : 인수의 개수
$? : 최근 실행한 명령어의 종료값
  - 0 (성공)
  - 1 ~ 125 (에러)
  - 126 (파일이 실행가능하지 않음)
  - 128 ~ 255 (시그널 발생)
```



**연산자**

- expr: 숫자 계산
- expr을 사용하는 경우 역작은 따옴표(`)를 사용해야 함
- 연산자 *와 괄호 () 앞에는 역슬래시 \ 와 같이 사용
- 연산자와 숫자, 변수, 기호 사이에는 space를 넣어야 함

```shell
num=`expr \( 3 \* 5 \) / 4 + 7`
echo $num
```



**조건문**

- 기본 if 구문

```
if [ 조건 ]
then
	명령문
fi
```

- 기본 if/else 구문

```
if [ 조건 ]
then
	명령문
else
	명령문
fi
```

- 조건 작성

```
문자1 == 문자2        # 문자1과 문자2가 일치
문자1 != 문자2        # 문자1과 문자2가 일치하지 않음
-z 문자              # 문자가 null이면 참
-n 문자              # 문자가 null이 아니면 참
값1 -eq 값2          # 값이 같음(equal)
값1 -ne 값2          # 값이 같지 않음(not equal)
값1 -lt 값2          # 값1이 값2보다 작음(less than)
값1 -le 값2          # 값1이 값2보다 작거나 같음(less or equal)
값1 -gt 값2          # 값1이 값2보다 큼(greater than)
값1 -ge 값2          # 값1이 값2보다 크거나 같음(greater or equal)
```

- 파일검사

```
-e 파일명            # 파일이 존재하면 참
-d 파일명            # 파일이 디렉토리면 참
-h 파일명            # 심볼릭 링크 파일
-f 파일명            # 파일이 일반파일이면 참
-r 파일명            # 파일이 읽기 가능이면 참
-s 파일명            # 파일크기가 0이 아니면 참
-u 파일명            # 파일이 set-user-id가 설정되면 참
-w 파일명            # 파일이 쓰기 가능 상태이면 참
-x 파일명            # 파일이 실행 가능 상태이면 참
```

- 논리연산

```
조건1 -a 조건2        # AND
조건1 -o 조건2        # OR
조건1 && 조건2        # 양쪽 다 성립
조건1 || 조건2        # 한쪽 또는 양쪽 다 성립
!조건                # 조건이 성립하지 않음
true                # 조건이 언제나 성립
false               # 조건이 언제나 성립하지 않음
```

- 조건문 한 줄에 작성

```
if [ 조건 ]; then 명령문; fi
```



**반복문**

- 기본 for 구문

```
for 변수 in 변수값1 변수값2 . . .
do
	명령문
done
```

- 기본 while 구문

```
while [ 조건문 ]
do
	명령문
done
```



